name: surek-system
source:
  type: local
compose_file_path: ./docker-compose.yml
public:
  - domain: whoami.<root>
    target: whoami
  - domain: portainer.<root>
    target: portainer:9000
  - domain: netdata.<root>
    target: netdata:19999
    auth: <default_auth>
env:
  by_container:
    restic:
      - RESTIC_REPOSITORY=s3:<backup_s3_endpoint>:/<backup_s3_bucket>
      - RESTIC_PASSWORD=<backup_password>
      - AWS_ACCESS_KEY_ID=<backup_s3_access_key>
      - AWS_SECRET_ACCESS_KEY=<backup_s3_secret_key>
    restic_prune:
      - RESTIC_REPOSITORY=s3:<backup_s3_endpoint>:/<backup_s3_bucket>
      - RESTIC_PASSWORD=<backup_password>
      - AWS_ACCESS_KEY_ID=<backup_s3_access_key>
      - AWS_SECRET_ACCESS_KEY=<backup_s3_secret_key>
    restic_check:
      - RESTIC_REPOSITORY=s3:<backup_s3_endpoint>:/<backup_s3_bucket>
      - RESTIC_PASSWORD=<backup_password>
      - AWS_ACCESS_KEY_ID=<backup_s3_access_key>
      - AWS_SECRET_ACCESS_KEY=<backup_s3_secret_key>